---
title: 利用VS2017配置opencv 4.1.1（Win10环境）
date: 2019-11-10 10:48:31
categories:
- opencv 学习+踩坑
tags:
- opencv
---



## 概述

​	本篇文章主要是讲解opencv的下载、安装，以及重点讲解如何使用vs2017对opencv进行配置。同时聊一聊配置过程中所踩过的一些坑。



## Opencv的下载

1.进入[opencv官网](https://opencv.org/)，点击如下图所示的Releases选项。？？1？？



2.点击windows选项进行下载。？？2？？下载完成以后为一个压缩包，双击后即可将里面的内容压缩至你想要存储这些解压后文件的文件夹目录下。



3.解压成功后如下面所示。？？3？？到这里，opencv库文件已经下载并解压完成了，接下来就是需要用VS2017对opencv进行配置了。



## 利用VS2017配置opencv 4.1.1（Win10环境）

0.首先，我们需要配置相应的环境变量：`右键单击“我的电脑”->属性->高级系统设置->环境变量->path->编辑`

??15??

然后点  `新建`   ，加入下方的路径。

> D:\opencv\build\x64\vc15\bin

？？16？？

之后点击确定。

1.我们打开VS2017，然后新建一个项目。？？4？？新建的项目是Windows控制台应用程序。



​	新建完项目之后第一件事就是把Debug后的x86改为x64。？？8？？



2.之后，我们打开属性管理器。打开方式是：视图->其他窗口->属性管理器   ？？5？？



3.打开之后，我们展开Debug|x64文件夹。？？6？？



4.接下来，我们右键Debug|x64文件夹，点击**添加新项目属性表**。？？7？？



5.将新项目属性表命名为：opencv411x64d.props       这个命名是随意的，方便自己理解即可。我之所以命名为这样，它所代表的含义是opencv 4.1.1版本、而vs2017上对应的是x64的Debug配置。 ？？9？？



6.之后，我们双击打开新命名的opencv411x64d配置。？？10？？



7.在   `通用属性->VC++ 目录->包含目录->编辑`  中添加：

> D:\opencv\build\include
>
> D:\opencv\build\include\opencv2

？？11？？

？？12？？

然后点击确定。

8.同样的，在  `通用属性->VC++ 目录->库目录->编辑`   中添加：

> D:\opencv\build\x64\vc15\lib

？？13？？

9.之后，在   `链节器->输入->附加依赖项`  中添加：

> opencv_world411d.lib
>
> opencv_world411.lib

**注意：这里有一点值得注意的坑是：opencv_world411d.lib必须放在opencv_world411.lib的前面，否则的话，在后期使用VS2017时，编译期间，比如使用imread()函数打开图像时会乱码。**？？14？？



10.到这里，相应的配置就结束了。

## 值得注意的是：

1.你每新建一个工程文件，就需要为VS2017设置类似于opencv411x64d.props的配置文件。当然，接下来我将介绍简单的方法。

2.打开之前配置过opencv411x64d.props文件的工程目录，你会看到其中就有名为opencv411x64d.props的一个文件。？？17？？



3.当你新建完另外一个工程文件后，我们都可以将opencv411x64d.props文件复制到新工程对应的这个文件夹中。然后再在新工程的属性管理器中右键“Debug|X64”，选择“添加现有属性表”。？？18？？



**4.当然，如果你想一劳永逸的话，可以直接在属性管理器中配置一次：Microsoft.Cpp.x64.user  即可。配置方式与上述配置方式一样。**



## 代码验证：

1.输入如图所示代码：？？19？？



2.但是运行后仍然出错，并出现如下所示内容。？？20？？



3.原因：路径名的问题。

> Mat img=imread("F:\blogger\milu.jpg");

应该将单斜杠\改为双斜杠\ \

> Mat img=imread("F:\ \blogger\ \milu.jpg");

4.除了注意路径名中的双斜杠问题以外，还需要注意的就是前面提高过的在：**附加依赖项**中添加opencv_world411d.lib名称需要放在前面。













