---
title: C++标准程序库
date: 2019-10-17 10:09:44
categories:
- C++标准程序库
tags:
- C++
---

## 第四章：通用工具（Utilities）

1.成员模板：成员函数为模板函数，包括构造函数，即模板构造函数。嵌套的类本身也可以是一个模板（`P14`）

2.`pair`对组：凡是要将两个值视为一个单元的场合（如：必须“返回两个值”的某函数），就必须用到它。尤其是常应用于`map`和`multimap`的键值对元素。

3.智能指针（`auto_ptr`）：

​	（1）智能指针目的在于指针消失时会提前释放指针所指的内存	

​	（2）`auto_ptr`不能指向数组（array），因为其释放内存时使用的是delete，而不是delete[]

​	（3）不能让一个以上的智能指针指向同一个对象，否则在一个指针被摧毁时，它会将所指地址处的内存释放，另外一个指针将会游离，可能造成十分严重的影响

​	（4）不能以一般指针的赋值手法来初始化一个`auto_ptr`（详情见c++标准程序库P49）

​	（5）指针对对象具有拥有权，可以通过赋值的形式交出拥有权，若如果不想交出拥有权，也就是说让一个智能指针始终指向一个对象，则可以使用`const`（详情见P43/44）

​	（6）名称空间中有时（也有可能是大多数时候）会有***次名称空间***，如`std`就拥有一个次名称空间`rel_ops`

---

## 第五章：STL

STL的基本观念：将数据与操作分离。数据由容器加以管理，操作则由可定制的算法定义之。而迭代器则在二者之间充当粘合剂，使算法可以和任何容器交互运作。

STL组件：STL包括容器（containers）、迭代器（iterators）、算法（algorithms）

- 容器：包括**序列式容器**和**关联式容器**。其中**序列式容器**如：vector、deque、list，可序群集，元素的位置取决于插入的时机和地点；**关联式容器**：set、multiset、map、multimap，这些均为已序群集。
- 迭代器：（1）**双向迭代器**：如list、set、multiset、map、multimap这些容器所提供的迭代器（2）**随机存取迭代器**：如vector、deque、strings所提供的迭代器，他们具有随机访问能力，可以使用operator[ ]。

1.容器：头文件#include<set>、#include<map>、#include<vector>等头文件中定义了相应容器的必要型别和操作。

```c++
vector<int> coll //声明一个名为coll的“元素型别为int”的vector容器，由于没有任何初始化参数，缺省构造函					//数就将其建构为空群集
```

set：每个元素只允许出现一次，不能重复

multiset：允许重复元素

map：每个键只能出现一次，不许重复

multimap：可包含多个键值相同的元素

2.迭代器：

基本操作有：operator*、operator++、operator==和operator!=、operator=

任何迭代器都具有的成员函数：begin()和end()

任何一种容器都定义有两种迭代器型别：

- `container::iterator`:以“读/写”模式遍历元素
- `container::const_iterator`:“只读”模式遍历元素

记住：迭代器使用**前置式递增**++的效率是高于**后置式递增**的效率，--也是如此。见p86